[Unit]
Description=etcd daemon

[Service]
Environment="ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.20.20.109:2380"
Environment="ETCD_LISTEN_PEER_URLS=http://10.20.20.109:2380"
Environment="ETCD_LISTEN_CLIENT_URLS=http://10.20.20.109:2379,http://127.0.0.1:2379"
Environment="ETCD_ADVERTISE_CLIENT_URLS=http://10.20.20.109:2379"
Environment="ETCD_INITIAL_CLUSTER_STATE=new"
Environment="ETCD_INITIAL_CLUSTER=yao=http://10.20.20.109:2380"
Environment="ETCD_NAME=yao"
ExecStart=/usr/bin/etcd2
ExecStartPost=-/bin/bash -c "until /usr/bin/etcdctl set /coreos.com/network/config '{\"Network\": \"10.100.0.0/16\"}'; do echo \"waiting for etcd to become available...\"; sleep 5; done"

[Install]

